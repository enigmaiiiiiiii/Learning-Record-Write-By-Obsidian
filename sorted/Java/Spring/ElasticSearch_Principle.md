# 原理

## 倒排索引

- 一般情况是: 一个文档对应多个词条
- 倒排索引是: 每个不重复词条对应多个文档
- 包含的信息
  - 保存每一个词项出现过的文档总数
  - 对应文档中一个具体词项出现的次数
  - 词项在文档中的顺序
  - 每个文档的长度
  - 所有文档的平均长度
- 用来让elastic决定那些词更重要，那些文档更重要

> 词项是每个可能被搜索的词

- 倒排索引被写入磁盘后，就不会再被修改, 所以
  - 不需要锁
  - 写入的大的倒排索引数据允许被压缩

## 文本如何被搜索

- 首先将数据库中的数据复制到ElasticSearch中
- 使用**倒排索引**来存储数据

> 单个字段存储单个值, 对模糊搜索是不够的

## relevance(相关性)

- 查询语句为每个文档对应一个`_score`字段 
- `_score`值对应
  - 检索词在字段出现的频率
  - 每个检索词出现的频率
  - 字段长度越短, `_score`越高

> 搜索是指: 在一个**字段**, 搜索**检索词**


