# 顺序容器操作

- [[c++手册#顺序容器添加元素]]
  - push参数为**元素类型的对象**，将对象拷贝到容器中
  > `container.push_back(obj(a,b,c));`
  - emplace添加元素的参数与所添加类型的构造函数的参数相匹配，在容器管理内存中直接创建对象
  > `container.emplace_back(a, b, c);`
  - 添加元素添加的是对象值的拷贝
- [[c++手册#顺序容器中访问元素]]
  - 所有方法返回引用
  
  ```c++
  if (!container.empty()) {
      container.front() = 42;
      auto &v = container.back();  // v是指向container中后一个元素的引用
      v = 1024;  // c中元素会被改变
      auto v2 = container.back();  // v2是container.back()的一个拷贝
      v2 = 0;  // 未改变container中元素
    }
  ```
  
- [[c++手册#顺序容器删除元素]]
- forward_list(单向链表)的插入和删除元素
  [[c++手册#forward_list元素操作]]
- 改变容器大小resize
  - `container.resize()`
  - array不支持resize
  - 大于容器原size，新增的部分由等于元素值参数的新元素或默认初始化新元素填充
- 可能导致迭代器失效的操作
  - vector或string
    - 存储空间被重新分配
    - 未重新分配空间,插入位置**之后**的迭代器，指针，引用会失效
    - 指向**被删除元素之前**的迭代器，引用，指针仍然有效
  - deque
    - 插入到**首尾元素之外**的任何位置都会导致**失效**
    - 在首尾位置添加元素，**迭代器**会失效，但指向**存在**元素的**指针和引用**不会失效
    - **首尾之外**的任何位置删除元素，指向其他元素的迭代器，引用，指针也会失效
    - 删除的是**尾元素**,**尾后迭代器**会失效，其他迭代器，引用，指针不会失效
    - 删除的是**首元素**，迭代器，引用，指针不会受影响
  - forward_list和list
    - **指向容器**的迭代器，指针，引用仍有效
    - 指向**其他位置**的迭代器，引用，指针仍有效